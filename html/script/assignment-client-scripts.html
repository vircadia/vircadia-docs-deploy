

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Assignment Client Scripts &mdash; Vircadia Documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon-256.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Avatar Scripts" href="avatar-scripts.html" />
    <link rel="prev" title="Interface Scripts" href="interface-scripts.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="https://projectathena.io/">
          

          
            
            <img src="../_static/vircadia-logo-1880.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search Vircadia Docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
<p style="margin-bottom: 10px; margin-top: 10px;"><a href="https://apidocs.vircadia.dev">Looking for <strong>API Reference</strong><br />Documentation?</a></p>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../home.html">HOME</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explore.html">EXPLORE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../create.html">CREATE</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../script.html">SCRIPT</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="get-started-with-scripting.html">Get Started with Scripting</a></li>
<li class="toctree-l2"><a class="reference internal" href="write-scripts.html">Write Your Own Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="js-tips.html">JavaScript Tips and Tricks</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface-scripts.html">Interface Scripts</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Assignment Client Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="avatar-scripts.html">Avatar Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="client-entity-scripts.html">Client Entity Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="server-entity-scripts.html">Server Entity Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="transfer-hfc-tutorial.html">Tutorial: Transfer Money and Items</a></li>
<li class="toctree-l2"><a class="reference internal" href="midi-tutorial.html">Tutorial: Use MIDI to Control Your Environment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../host.html">HOST</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">CONTRIBUTE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer.html">DEVELOPER</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">RELEASE NOTES</a></li>
<li class="toctree-l1"><a class="reference external" href="https://apidocs.vircadia.dev">API REFERENCE</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Vircadia Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          






















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    You are here: 
      <li><a href="../index.html"><i class="fa fa-home"></i></a> &raquo;</li>
        
          <li><a href="../script.html">Script</a> &raquo;</li>
        
      <li>Assignment Client Scripts</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/kasenvr/athena-docs-sphinx/blob/master/docs/source/script/assignment-client-scripts.md" class="fa fa-github"></a><a href="https://github.com/kasenvr/athena-docs-sphinx/blob/master/docs/source/script/assignment-client-scripts.md"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="assignment-client-scripts">
<h1>Assignment Client Scripts<a class="headerlink" href="#assignment-client-scripts" title="Permalink to this headline">¶</a></h1>
<p>Assignment Client (AC) scripts (also known as “persistent scripts”) run persistently in a domain and aren’t affected by other scripts. These scripts run on an assignment client separate from the Interface, so the script will continue to run until you either remove the script from the domain or you shut down the domain entirely.</p>
<p>With AC scripts, you can do things like coordinate actions between entities and avatars, and add virtual pets to greet visitors to your domain.</p>
<p><strong>On This Page</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="#add-an-ac-script">Add an AC Script</a></p></li>
<li><p><a class="reference external" href="#example-of-an-ac-script">Example of an AC Script</a></p></li>
</ul>
<div class="section" id="add-an-ac-script">
<h2>Add an AC Script<a class="headerlink" href="#add-an-ac-script" title="Permalink to this headline">¶</a></h2>
<p>Once you’ve written and hosted your script, you need to add it to a domain, either your own or one where you have permissions to run an AC script.</p>
<ol class="simple">
<li><p>Open your ‘Domain Administration Panel’. If you are on a local sandbox, open it by clicking on the High Fidelity icon in the taskbar notifications and ‘click Settings’.</p></li>
<li><p>From the menu, go to <strong>Content &gt; Scripts</strong>.</p></li>
<li><p>In the Persistent Scripts section, click <strong>+</strong> and paste the URL to your script under ‘Script URL’.
<img alt="../_images/ac-script.png" src="../_images/ac-script.png" /></p></li>
<li><p>At the top of the page, click ‘Save and Restart’. Now, every time you enter that domain, the AC script will be running.</p></li>
</ol>
</div>
<div class="section" id="example-of-an-ac-script">
<h2>Example of an AC Script<a class="headerlink" href="#example-of-an-ac-script" title="Permalink to this headline">¶</a></h2>
<p>The following script counts the number of entities found in a domain using High Fidelity’s <a class="reference external" href="https://apidocs.vircadia.dev/EntityViewer.html">EntityViewer</a>.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">SEARCH_CENTER</span> <span class="o">=</span> <span class="p">{</span><span class="nx">x</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="nx">z</span><span class="o">:</span> <span class="mi">0</span><span class="p">};</span>
<span class="kd">var</span> <span class="nx">SEARCH_RADIUS</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">isInitialized</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">timeout</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">update</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">deltaTime</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isInitialized</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">Entities</span><span class="p">.</span><span class="nx">serversExist</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">Entities</span><span class="p">.</span><span class="nx">canRez</span><span class="p">())</span> <span class="p">{</span>
            <span class="nx">EntityViewer</span><span class="p">.</span><span class="nx">setPosition</span><span class="p">(</span><span class="nx">SEARCH_CENTER</span><span class="p">);</span>
            <span class="nx">EntityViewer</span><span class="p">.</span><span class="nx">setCenterRadius</span><span class="p">(</span><span class="nx">SEARCH_RADIUS</span><span class="p">);</span>
            <span class="nx">EntityViewer</span><span class="p">.</span><span class="nx">queryOctree</span><span class="p">();</span>

            <span class="nx">Script</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
                <span class="kd">var</span> <span class="nx">foundEntities</span> <span class="o">=</span> <span class="nx">Entities</span><span class="p">.</span><span class="nx">findEntities</span><span class="p">(</span><span class="nx">SEARCH_CENTER</span><span class="p">,</span> <span class="nx">SEARCH_RADIUS</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>

                <span class="nx">print</span><span class="p">(</span><span class="s2">&quot;AC Script found: &quot;</span> <span class="o">+</span> <span class="nx">foundEntities</span> <span class="o">+</span> <span class="s2">&quot; entities within &quot;</span> <span class="o">+</span> <span class="nx">SEARCH_RADIUS</span> <span class="o">+</span> <span class="s2">&quot;m of &quot;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">SEARCH_CENTER</span><span class="p">));</span>
    
            <span class="p">},</span> <span class="nx">timeout</span><span class="p">);</span>
         
            <span class="nx">isInitialized</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">Script</span><span class="p">.</span><span class="nx">update</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">(</span><span class="nx">update</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">Script</span><span class="p">.</span><span class="nx">update</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">update</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>See Also</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="../host/configure-settings.html">Configure Your Domain Settings</a></p></li>
<li><p><a class="reference external" href="get-started-with-scripting.html">Get Started with Scripting</a></p></li>
<li><p><a class="reference external" href="write-scripts.html">Write Your Own Scripts</a></p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="avatar-scripts.html" class="btn btn-neutral float-right" title="Avatar Scripts" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="interface-scripts.html" class="btn btn-neutral float-left" title="Interface Scripts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, High Fidelity. © Copyright 2020, Vircadia.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  

   

</body>
</html>