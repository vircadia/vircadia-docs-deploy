

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Server Entity Scripts &mdash; Project Athena Documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/fav-icon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Tutorial: Transfer Money and Items" href="transfer-hfc-tutorial.html" />
    <link rel="prev" title="Client Entity Scripts" href="client-entity-scripts.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="https://projectathena.io/">
          

          
            
            <img src="../_static/project-athena-logo.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search Project Athena Docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
<p style="margin-bottom: 10px; margin-top: 10px;"><a href="https://apidocs.projectathena.dev">Looking for <strong>API Reference</strong><br />Documentation?</a></p>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../home.html">HOME</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explore.html">EXPLORE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../create.html">CREATE</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../script.html">SCRIPT</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="get-started-with-scripting.html">Get Started with Scripting</a></li>
<li class="toctree-l2"><a class="reference internal" href="write-scripts.html">Write Your Own Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="js-tips.html">JavaScript Tips and Tricks</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface-scripts.html">Interface Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="assignment-client-scripts.html">Assignment Client Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="avatar-scripts.html">Avatar Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="client-entity-scripts.html">Client Entity Scripts</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Server Entity Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="transfer-hfc-tutorial.html">Tutorial: Transfer Money and Items</a></li>
<li class="toctree-l2"><a class="reference internal" href="midi-tutorial.html">Tutorial: Use MIDI to Control Your Environment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../host.html">HOST</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">CONTRIBUTE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer.html">DEVELOPER</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">RELEASE NOTES</a></li>
<li class="toctree-l1"><a class="reference external" href="https://apidocs.projectathena.dev">API REFERENCE</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Athena Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          






















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    You are here: 
      <li><a href="../index.html"><i class="fa fa-home"></i></a> &raquo;</li>
        
          <li><a href="../script.html">Script</a> &raquo;</li>
        
      <li>Server Entity Scripts</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/kasenvr/athena-docs-sphinx/blob/master/docs/source/script/server-entity-scripts.md" class="fa fa-github"></a><a href="https://github.com/kasenvr/athena-docs-sphinx/blob/master/docs/source/script/server-entity-scripts.md"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="server-entity-scripts">
<h1>Server Entity Scripts<a class="headerlink" href="#server-entity-scripts" title="Permalink to this headline">¶</a></h1>
<p>You can make content in High Fidelity interactive by attaching scripts to entities. <em>Server entity scripts</em> are entity scripts that run on the server (or domain) that hosts the entity. These scripts run persistently in a domain, even if there are no users present. This means that there is only one instance of the script is running at a time, and it is running on the server. Any behavior that is controlled by your script will be seen and heard by everyone in the domain.</p>
<p><strong>On This Page</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="#attach-a-server-entity-script-to-an-entity">Attach a Server Entity Script to an Entity</a></p></li>
<li><p><a class="reference external" href="#example-of-a-server-entity-script">Example of a Server Entity Script</a></p></li>
<li><p><a class="reference external" href="#script-api">Script API</a></p></li>
</ul>
<div class="section" id="attach-a-server-entity-script-to-an-entity">
<h2>Attach a Server Entity Script to an Entity<a class="headerlink" href="#attach-a-server-entity-script-to-an-entity" title="Permalink to this headline">¶</a></h2>
<p>To attach a server entity script to an entity:</p>
<ol class="simple">
<li><p>In Interface, pull up your tablet or HUD and go to <strong>Create</strong>.</p></li>
<li><p>Select the entity you’d like to script by either clicking on it in Interface or finding it in the ‘Entity List’.</p></li>
<li><p>In the <strong>Create</strong> app, go to the ‘Properties’ tab and scroll down to the ‘Behavior’ section.</p></li>
<li><p>For ‘Server Script’, enter the URL to your server entity script.</p></li>
</ol>
<div class="admonition note">
    <p class="admonition-title">Note</p>
    <p>An entity can have multiple server entity scripts attached to it, but all of these must be through a single file URL. </p>
</div></div>
<div class="section" id="example-of-a-server-entity-script">
<h2>Example of a Server Entity Script<a class="headerlink" href="#example-of-a-server-entity-script" title="Permalink to this headline">¶</a></h2>
<p>The following script modifies the intensity of a light entity, so that it flickers tea lights.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">MINIMUM_LIGHT_INTENSITY</span> <span class="o">=</span> <span class="mf">100.0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">MAXIMUM_LIGHT_INTENSITY</span> <span class="o">=</span> <span class="mf">125.0</span><span class="p">;</span>

    <span class="c1">// Return a random number between `low` (inclusive) and `high` (exclusive)</span>
    <span class="kd">function</span> <span class="nx">randFloat</span><span class="p">(</span><span class="nx">low</span><span class="p">,</span> <span class="nx">high</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">low</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="nx">high</span> <span class="o">-</span> <span class="nx">low</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">preload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">entityID</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">intervalID</span> <span class="o">=</span> <span class="nx">Script</span><span class="p">.</span><span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">Entities</span><span class="p">.</span><span class="nx">editEntity</span><span class="p">(</span><span class="nx">entityID</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">intensity</span><span class="o">:</span> <span class="nx">randFloat</span><span class="p">(</span><span class="nx">MINIMUM_LIGHT_INTENSITY</span><span class="p">,</span> <span class="nx">MAXIMUM_LIGHT_INTENSITY</span><span class="p">)</span>
            <span class="p">});</span>
        <span class="p">},</span> <span class="mi">100</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">unload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">Script</span><span class="p">.</span><span class="nx">clearInterval</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">intervalID</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>This script is a good example of a server entity script because it only needs one actor to update the intensity of the light. The same script could be attached as an entity client script, but all clients who could see the tea light would be editing the entity to vary the intensity of the light to flicker it.</p>
</div>
<div class="section" id="script-api">
<h2>Script API<a class="headerlink" href="#script-api" title="Permalink to this headline">¶</a></h2>
<p>The Entity Script Server does not have access to all of the listed components of the API. APIs for avatars, controllers, recording, overlays, and mouse and keyboard events are not available in the Entity Script Server.</p>
<p>Learn more about what APIs are available to server entity scripts <a class="reference external" href="https://apidocs.highfidelity.com/Entities.html">here</a>.</p>
<p><strong>See Also</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="get-started-with-scripting.html">Get Started with Scripting</a></p></li>
<li><p><a class="reference external" href="write-scripts.html">Write Your Own Scripts</a></p></li>
<li><p><a class="reference external" href="https://apidocs.highfidelity.com">API Reference</a></p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="transfer-hfc-tutorial.html" class="btn btn-neutral float-right" title="Tutorial: Transfer Money and Items" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="client-entity-scripts.html" class="btn btn-neutral float-left" title="Client Entity Scripts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, High Fidelity. © Copyright 2020, Project Athena.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  

   

</body>
</html>